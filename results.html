<head>
<link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,700|Roboto:400,700" rel="stylesheet">
<link href='style.css' rel='stylesheet' type='text/css'>
<title>CourelliValues Results</title>
<link rel="icon" type="x-icon" href="icon.png">
<link rel="shortcut icon" type="x-icon" href="icon.png">
<meta charset="utf-8">
<script>
  version = "1.0" //Remember to update this before making changes to the test itself!
</script>
</head>
<script type="application/javascript"
        src="ideologies.js">
</script>

<body>
<h1>CourelliValues</h1>
<hr>

<h1>Results</h1>

<h2>Economic Axis: <span class="weight-300" id="economic-label"></span></h2>
<div class="axis">
<!-- Socialist -->
    <img id="img-socialist" src="value_images/socialist.svg" height="128pt"/>
    <div class="bar socialist" id="bar-socialist"><div class="text-wrapper" id="socialist"></div></div>
<!-- Capitalist -->
    <div class="bar capitalist" id="bar-capitalist"><div class="text-wrapper" id="capitalist"></div></div>
    <img id="img-capitalist" src="value_images/capitalist.svg" height="128pt"/>
</div>
<h2>Government Axis: <span class="weight-300" id="economic-label"></span></h2>
<div class="axis">
<!-- Democratic -->
    <img id="img-democratic" src="value_images/democratic.svg" height="128pt"/>
    <div class="bar democratic" id="bar-democratic"><div class="text-wrapper" id="democratic"></div></div>
<!-- Authoritarian -->
    <div class="bar authoritarian" id="bar-authoritarian"><div class="text-wrapper" id="authoritarian"></div></div>
    <img id="img-capitalist" src="value_images/authoritarian.svg" height="128pt"/>
</div>
<h2>Centralization Axis: <span class="weight-300" id="economic-label"></span></h2>
<div class="axis">
<!-- Centralized -->
    <img id="img-centralized" src="value_images/centralized.svg" height="128pt"/>
    <div class="bar centralized" id="bar-centralized"><div class="text-wrapper" id="centralized"></div></div>
<!-- Decentralized -->
    <div class="bar decentralized" id="bar-decentralized"><div class="text-wrapper" id="decentralized"></div></div>
    <img id="img-decentralized" src="value_images/decentralized.svg" height="128pt"/>
</div>
<h2>Religion Axis: <span class="weight-300" id="economic-label"></span></h2>
<div class="axis">
<!-- Secular -->
    <img id="img-secular" src="value_images/secular.svg" height="128pt"/>
    <div class="bar secular" id="bar-secular"><div class="text-wrapper" id="secular"></div></div>
<!-- Religious -->
    <div class="bar religious" id="bar-religious"><div class="text-religious" id="religious"></div></div>
    <img id="img-religious" src="value_images/religious.svg" height="128pt"/>
</div>
<h2>Social Axis: <span class="weight-300" id="economic-label"></span></h2>
<div class="axis">
<!-- Progressive -->
    <img id="img-progressive" src="value_images/progressive.svg" height="128pt"/>
    <div class="bar progressive" id="bar-progressive"><div class="text-wrapper" id="progressive"></div></div>
<!-- Conservative -->
    <div class="bar conservative" id="bar-conservative"><div class="text-wrapper" id="conservative"></div></div>
    <img id="img-conservative" src="value_images/conservative.svg" height="128pt"/>
</div>
<h2>Nationalism Axis: <span class="weight-300" id="economic-label"></span></h2>
<div class="axis">
<!-- Internationalist -->
    <img id="img-internationalist" src="value_images/internationalist.svg" height="128pt"/>
    <div class="bar internationalist" id="bar-internationalist"><div class="text-wrapper" id="internationalist"></div></div>
<!-- Isolationist -->
    <div class="bar isolationist" id="bar-isolationist"><div class="text-wrapper" id="isolationist"></div></div>
    <img id="img-isolationist" src="value_images/isolationist.svg" height="128pt"/>
</div>
<h2>Militarism Axis: <span class="weight-300" id="economic-label"></span></h2>
<div class="axis">
<!-- Imperialist -->
    <img id="img-imperialist" src="value_images/imperialist.svg" height="128pt"/>
    <div class="bar imperialist" id="bar-imperialist"><div class="text-wrapper" id="imperialist"></div></div>
<!-- Diplomatic -->
    <div class="bar diplomatic" id="bar-diplomatic"><div class="text-wrapper" id="diplomatic"></div></div>
    <img id="img-diplomatic" src="value_images/diplomatic.svg" height="128pt"/>
</div>
<h2>Ecological Axis: <span class="weight-300" id="economic-label"></span></h2>
<div class="axis">
<!-- Ecological -->
    <img id="img-ecological" src="value_images/ecological.svg" height="128pt"/>
    <div class="bar ecological" id="bar-ecological"><div class="text-wrapper" id="ecological"></div></div>
<!-- Industrial -->
    <div class="bar industrial" id="bar-industrial"><div class="text-wrapper" id="industrial"></div></div>
    <img id="img-industrial" src="value_images/industrial.svg" height="128pt"/>
</div>

<h2>Closest Match: <span class="weight-300" id="ideology-label"></span></h2>
<p>You can send these results by copying and pasting the URL at the top of the page or using the image below. Think your matched ideology was wrong? Want to help us calibrate the test? Send the results along with your political ideology to Courelli, or send us any comments, questions, or criticism. </p>
<hr/>
<img src="" id="banner">
<button class="button" onclick="location.href='index.html';">Back</button> <br>
<!-- Website visit statistics - no personal information is collected! -->
<script type="text/javascript">
var sc_project=11325211;
var sc_invisible=1;
var sc_security="fd9f0659";
var scJsHost = (("https:" == document.location.protocol) ?
"https://secure." : "http://www.");
document.write("<sc"+"ript type='text/javascript' src='" +
scJsHost+
"statcounter.com/counter/counter.js'></"+"script>");
</script>
<noscript><div class="statcounter"><a title="web stats"
href="http://statcounter.com/" target="_blank"><img
class="statcounter"
src="//c.statcounter.com/11325211/0/fd9f0659/1/" alt="web
stats"></a></div></noscript>
<script>
    function getQueryVariable(variable)
    {
           var query = window.location.search.substring(1)
           var vars = query.split("&")
           for (var i=0;i<vars.length;i++) {
                   var pair = vars[i].split("=")
                   if(pair[0] == variable) {return pair[1]}
           }
           return(NaN);
    }

    function setBarValue(name, value) {
        innerel = document.getElementById(name)
        outerel = document.getElementById("bar-" + name)
        outerel.style.width = (value + "%")
        innerel.innerHTML = (value + "%")
        if (innerel.offsetWidth + 20 > outerel.offsetWidth) {
            innerel.style.visibility = "hidden"
        }
    }

    econArray = ["Communist","Socialist","Social","Centrist","Market","Capitalist","Laissez-Faire"]
    govtArray = ["TBD","TBD","TBD","TBD","TBD","TBD","TBD"]
    centArray = ["Anarchist","Libertarian","Liberal","Moderate","Statist","Authoritarian","Totalitarian"]
    relgArray = ["TBD","TBD","TBD","TBD","TBD","TBD","TBD"]
    soclArray = ["Revolutionary","Very Progressive","Progressive","Neutral","Traditional","Very Traditional","Reactionary"]
    natlArray = ["Cosmopolitan","Internationalist","Peaceful","Balanced","Patriotic","Nationalist","Chauvinist"]
    miltArray = ["TBD","TBD","TBD","TBD","TBD","TBD","TBD"]
    ecolArray = ["Druid","Very Ecological","Ecological","Neutral","Industrial","Very Industrial","Rockefeller"]

    function setLabel(val,ary) {
        if (val > 100) { return ""     } else
        if (val > 90)  { return ary[0] } else
        if (val > 75)  { return ary[1] } else
        if (val > 60)  { return ary[2] } else
        if (val >= 40) { return ary[3] } else
        if (val >= 25) { return ary[4] } else
        if (val >= 10) { return ary[5] } else
        if (val >= 0)  { return ary[6] } else
        	{return ""}
    }

    socialist        = getQueryVariable("soc")
    democratic       = getQueryVariable("dem")
    centralized      = getQueryVariable("cen")
    secular          = getQueryVariable("sec")
    progressive      = getQueryVariable("pro")
    internationalist = getQueryVariable("int")
    imperialist      = getQueryVariable("imp")
    ecological       = getQueryVariable("eco")
	
    capitalist    = (100 - socialist       ).toFixed(1)
    authoritarian = (100 - democratic      ).toFixed(1)
    decentralized = (100 - centralized     ).toFixed(1)
    religious     = (100 - secular         ).toFixed(1)
    conservative  = (100 - progressive     ).toFixed(1)
    isolationist  = (100 - internationalist).toFixed(1)
    diplomatic    = (100 - imperialist     ).toFixed(1)
    industrial    = (100 - ecological      ).toFixed(1)

    setBarValue("socialist", socialist)
    setBarValue("capitalist", capitalist)
    setBarValue("democratic", democratic)
    setBarValue("authoritarian", authoritarian)
    setBarValue("centralized", centralized)
    setBarValue("decentralized", decentralized)
    setBarValue("secular", secular)
    setBarValue("religious", religious)
    setBarValue("progressive", progressive)
    setBarValue("conservative", conservative)
    setBarValue("internationalist", internationalist)
    setBarValue("isolationist", isolationist)
    setBarValue("imperialist", imperialist)
    setBarValue("diplomatic", diplomatic)
    setBarValue("ecological", ecological)
    setBarValue("industrial", industrial)	

    document.getElementById("economic-label").innerHTML = setLabel(socialist, econArray)
    document.getElementById("government-label").innerHTML = setLabel(democratic, govtArray)
    document.getElementById("centralization-label").innerHTML = setLabel(centralized, centArray)
    document.getElementById("religion-label").innerHTML = setLabel(secular, relgArray)
    document.getElementById("social-label").innerHTML = setLabel(progressive, soclArray)
    document.getElementById("nationalism-label").innerHTML = setLabel(internationalist, natlArray)
    document.getElementById("militarism-label").innerHTML = setLabel(imperialist, miltArray)
    document.getElementById("ecological-label").innerHTML = setLabel(ecological, ecolArray)

    ideology = ""
    ideodist = Infinity
    for (var i = 0; i < ideologies.length; i++) {
        dist = 0
        dist += Math.pow(Math.abs(ideologies[i].stats.econ - equality), 2)
        dist += Math.pow(Math.abs(ideologies[i].stats.govt - liberty), 2)
        dist += Math.pow(Math.abs(ideologies[i].stats.dipl - peace), 1.73856063)
        dist += Math.pow(Math.abs(ideologies[i].stats.scty - progress), 1.73856063)
        if (dist < ideodist) {
            ideology = ideologies[i].name
            ideodist = dist
        }
    }
    document.getElementById("ideology-label").innerHTML = ideology

    function createImage(src, x, y, w, h) {
        img = new Image ()
        img.src = src
        img.onLoad = function() {
            ctx.drawImage(img, x, y, w, h)
        }
    }

    window.onload = function() {
        var c = document.createElement("canvas")
        var ctx = c.getContext("2d")
        c.width = 800;
        c.height = 650;
        ctx.fillStyle = "#EEEEEE"
        ctx.fillRect(0,0,800,650);

        img = document.getElementById("img-equality")
        ctx.drawImage(img, 20, 170, 100, 100);
        img = document.getElementById("img-wealth")
        ctx.drawImage(img, 680, 170, 100, 100)
        img = document.getElementById("img-might")
        ctx.drawImage(img, 20, 290, 100, 100)
        img = document.getElementById("img-peace")
        ctx.drawImage(img, 680, 290, 100, 100)
        img = document.getElementById("img-liberty")
        ctx.drawImage(img, 20, 410, 100, 100)
        img = document.getElementById("img-authority")
        ctx.drawImage(img, 680, 410, 100, 100)
        img = document.getElementById("img-tradition")
        ctx.drawImage(img, 20, 530, 100, 100)
        img = document.getElementById("img-progress")
        ctx.drawImage(img, 680, 530, 100, 100)

        ctx.fillStyle="#222222"
        ctx.fillRect(120, 180, 560, 80)
        ctx.fillRect(120, 300, 560, 80)
        ctx.fillRect(120, 420, 560, 80)
        ctx.fillRect(120, 540, 560, 80)
        ctx.fillStyle="#f44336"
        ctx.fillRect(120, 184, 5.6*equality-2, 72)
        ctx.fillStyle="#00897b"
        ctx.fillRect(682-5.6*wealth, 184, 5.6*wealth-2, 72)
        ctx.fillStyle="#ff9800"
        ctx.fillRect(120, 304, 5.6*might-2, 72)
        ctx.fillStyle="#03a9f4"
        ctx.fillRect(682-5.6*peace, 304, 5.6*peace-2, 72)
        ctx.fillStyle="#ffeb3b"
        ctx.fillRect(120, 424, 5.6*liberty-2, 72)
        ctx.fillStyle="#3f51b5"
        ctx.fillRect(682-5.6*authority, 424, 5.6*authority-2, 72)
        ctx.fillStyle="#8bc34a"
        ctx.fillRect(120, 544, 5.6*tradition-2, 72)
        ctx.fillStyle="#9c27b0"
        ctx.fillRect(682-5.6*progress, 544, 5.6*progress-2, 72)
        ctx.fillStyle="#222222"
        ctx.font="700 80px Montserrat"
        ctx.textAlign="left"
        ctx.fillText("CourelliValues", 20, 90)
        ctx.font="30px Montserrat"
        ctx.fillText(ideology, 20, 140)

        ctx.textAlign="left"
        if (equality  > 30) {ctx.fillText(equality + "%", 130, 237.5)}
        if (might     > 30) {ctx.fillText(might + "%", 130, 357.5)}
        if (liberty   > 30) {ctx.fillText(liberty + "%", 130, 477.5)}
        if (tradition > 30) {ctx.fillText(tradition + "%", 130, 597.5)}
        ctx.textAlign="right"
        if (wealth    > 30) {ctx.fillText(wealth + "%", 670, 237.5)}
        if (peace     > 30) {ctx.fillText(peace + "%", 670, 357.5)}
        if (authority > 30) {ctx.fillText(authority + "%", 670, 477.5)}
        if (progress  > 30) {ctx.fillText(progress + "%", 670, 597.5)}

        ctx.font="300 30px Montserrat"
        ctx.fillText(" ", 780, 60)
		ctx.fillText(version, 780, 90)
        ctx.textAlign="center"
        ctx.fillText("Economic Axis: " + document.getElementById("economic-label").innerHTML, 400, 175)
        ctx.fillText("Diplomatic Axis: " + document.getElementById("diplomatic-label").innerHTML, 400, 295)
        ctx.fillText("Civil Axis: " + document.getElementById("state-label").innerHTML, 400, 415)
        ctx.fillText("Societal Axis: " + document.getElementById("society-label").innerHTML, 400, 535)

        document.getElementById("banner").src = c.toDataURL();
    }
    </script>
</body>
